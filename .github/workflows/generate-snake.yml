name: Generate LeetCode-Style Activity Graph

on:
  # Run this workflow manually from the Actions tab
  workflow_dispatch:

  # Run automatically on a schedule (e.g., every 12 hours)
  schedule:
    - cron: '0 */8 * * *'

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Generate LeetCode activity graph
        uses: Ashutosh00710/github-readme-activity-graph@v1.0.0
        with:
          # Your GitHub username
          USERNAME: ${{ github.repository_owner }}

          # The output file for the graph
          GRAPH_PATH: "github-activity-graph.svg"

          # Customization options for LeetCode theme
          BG_COLOR: "0D1117"
          COLOR: "FFFFFF"
          LINE: "59D561"
          POINT: "59D56g"
          AREA: "true"
          HIDE_BORDER: "true"
          CUSTOM_TITLE: "My LeetCode Submissions"

      - name: Update README with new graph
        run: |
          sed -i 's|!\[Ashutosh'"'"'s github activity graph\](https://github-readme-activity-graph.vercel.app/graph?username=[^&)]*)|!\[My LeetCode Submissions\](github-activity-graph.svg)|' README.md

      - name: Commit and push changes
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "chore: Update LeetCode activity graph"
          file_pattern: README.md github-activity-graph.svg
